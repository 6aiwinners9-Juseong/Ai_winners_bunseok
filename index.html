<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ï£ºÏÑ±ÏÇ¨Îßà ÏáºÏ∏† Î∂ÑÏÑùÌï¥ÏÑú Ïπ¥Ìîº ÏûêÎèôÌôî (AI Powered)</title>
    
    <!-- React & ReactDOM (CDN) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    
    <!-- Babel (JSX Î≥ÄÌôòÏö©) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Style -->
    <style>
        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.05);
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(255,255,255,0.3);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        .animate-pulse-fast {
            animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans selection:bg-yellow-200 selection:text-yellow-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icons ---
        const Icon = ({ path, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );

        const Zap = (props) => <Icon {...props} path={<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />} />;
        const Settings = (props) => <Icon {...props} path={<><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></>} />;
        const AlertCircle = (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></>} />;
        const LinkIcon = (props) => <Icon {...props} path={<><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></>} />;
        const FileText = (props) => <Icon {...props} path={<><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></>} />;
        const HelpCircle = (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></>} />;
        const Sparkles = (props) => <Icon {...props} path={<path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/>} />;
        const BarChart2 = (props) => <Icon {...props} path={<><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></>} />;
        const Scissors = (props) => <Icon {...props} path={<><circle cx="6" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><line x1="20" y1="4" x2="8.12" y2="15.88"/><line x1="14.47" y1="14.48" x2="20" y2="20"/><line x1="8.12" y1="8.12" x2="12" y2="12"/></>} />;
        const Layout = (props) => <Icon {...props} path={<><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></>} />;
        const ImageIcon = (props) => <Icon {...props} path={<><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></>} />;
        const Video = (props) => <Icon {...props} path={<><path d="m22 8-6 4 6 4V8Z"/><rect width="14" height="12" x="2" y="6" rx="2" ry="2"/></>} />;
        const Check = (props) => <Icon {...props} path={<polyline points="20 6 9 17 4 12"/>} />;
        const Copy = (props) => <Icon {...props} path={<><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></>} />;
        const ExternalLink = (props) => <Icon {...props} path={<><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></>} />;
        const Gem = (props) => <Icon {...props} path={<path d="M6 3h12l4 6-10 13L2 9Z" />} />;
        const Save = (props) => <Icon {...props} path={<><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></>} />;
        const Network = (props) => <Icon {...props} path={<><rect x="16" y="16" width="6" height="6" rx="1"/><rect x="2" y="16" width="6" height="6" rx="1"/><rect x="9" y="2" width="6" height="6" rx="1"/><path d="M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"/><path d="M12 12V8"/></>} />;
        const Wand = (props) => <Icon {...props} path={<><path d="M15 4V2"/><path d="M15 16v-2"/><path d="M8 9h2"/><path d="M20 9h2"/><path d="M17.8 11.8 19 13"/><path d="M15 9h0"/><path d="M17.8 6.2 19 5"/><path d="m3 21 9-9"/><path d="M12.2 6.2 11 5"/></>} />;
        const Hash = (props) => <Icon {...props} path={<><line x1="4" y1="9" x2="20" y2="9"/><line x1="4" y1="15" x2="20" y2="15"/><line x1="10" y1="3" x2="8" y2="21"/><line x1="16" y1="3" x2="14" y2="21"/></>} />;

        const ViralContentBuilder = () => {
            const [url, setUrl] = useState('');
            const [description, setDescription] = useState('');
            const [isGenerating, setIsGenerating] = useState(false);
            const [activeStep, setActiveStep] = useState(0);
            const [result, setResult] = useState(null);
            const [copiedIndex, setCopiedIndex] = useState(null);
            const [toastMessage, setToastMessage] = useState(null);
            
            // API Key & Model State
            const [apiKey, setApiKey] = useState('');
            const [selectedModel, setSelectedModel] = useState('gemini-1.5-pro'); // Í≤ÄÏÉâÏóê Í∞ïÌïú Î™®Îç∏ Í∏∞Î≥∏Í∞í
            const [customModelId, setCustomModelId] = useState('');
            const [showSettings, setShowSettings] = useState(false);
            const [error, setError] = useState(null);
            const [testStatus, setTestStatus] = useState('idle');
            
            // Magic Script Rewriting State
            const [rewritingId, setRewritingId] = useState(null);

            const availableModels = [
                { id: 'gemini-1.5-pro', name: 'Gemini 1.5 Pro (Í≤ÄÏÉâ Î∂ÑÏÑù ÏµúÏ†Å/Í∞ïÎ†• Ï∂îÏ≤ú)' },
                { id: 'gemini-2.0-flash-exp', name: 'Gemini 2.0 Flash (ÏµúÏã† ÏÜçÎèÑ Ï§ëÏã¨)' },
                { id: 'gemini-1.5-flash', name: 'Gemini 1.5 Flash (Í∞ÄÏÑ±ÎπÑ)' },
                { id: 'gemini-2.5-flash-preview-09-2025', name: 'Gemini 2.5 Preview (Í∏∞ÌÉÄ)' },
                { id: 'gemini-3.0-pro-exp', name: 'Gemini 3.0 Pro (Ï¥àÏã†ÏÑ±/Ïã§ÌóòÏ†Å)' },
                { id: 'custom', name: 'ÏßÅÏ†ë ÏûÖÎ†• (Custom ID)' }
            ];

            useEffect(() => {
                const storedKey = localStorage.getItem('gemini_api_key');
                const storedModel = localStorage.getItem('gemini_model');
                const storedCustomId = localStorage.getItem('gemini_custom_id');
                
                if (storedKey) setApiKey(storedKey);
                if (storedModel) setSelectedModel(storedModel);
                if (storedCustomId) setCustomModelId(storedCustomId);
            }, []);

            const handleSaveApiKey = () => {
                if (!apiKey.trim()) {
                    setToastMessage("API KeyÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.");
                    return;
                }
                localStorage.setItem('gemini_api_key', apiKey.trim());
                localStorage.setItem('gemini_model', selectedModel);
                if(selectedModel === 'custom') {
                    localStorage.setItem('gemini_custom_id', customModelId);
                }
                setShowSettings(false);
                setToastMessage("ÏÑ§Ï†ïÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.");
                setTimeout(() => setToastMessage(null), 3000);
            };

            const handleTestApiKey = async () => {
                if (!apiKey.trim()) {
                    setTestStatus('error');
                    setToastMessage("API KeyÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.");
                    return;
                }
                
                const modelToUse = selectedModel === 'custom' ? customModelId : selectedModel;
                if (!modelToUse) {
                    setToastMessage("Î™®Îç∏ IDÎ•º ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.");
                    return;
                }

                setTestStatus('testing');
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${modelToUse}:generateContent?key=${apiKey.trim()}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: [{ parts: [{ text: "Hello" }] }] })
                    });

                    if (response.ok) {
                        setTestStatus('success');
                        setToastMessage(`Ïó∞Í≤∞ ÏÑ±Í≥µ! (${modelToUse})`);
                    } else {
                        const errData = await response.json().catch(() => ({}));
                        throw new Error(errData.error?.message || `HTTP ${response.status}`);
                    }
                } catch (e) {
                    console.error(e);
                    setTestStatus('error');
                    setToastMessage(`Ïó∞Í≤∞ Ïã§Ìå®: ${e.message}`);
                }
            };

            // ‚ú® Îß§ÏßÅ Ïä§ÌÅ¨Î¶ΩÌä∏ ÏàòÏ†ï Í∏∞Îä• (Îã®Ïùº Ïî¨ ÏàòÏ†ï)
            const handleRewriteScript = async (sceneId, type) => {
                if (!apiKey || rewritingId) return;
                
                const scene = result.scenes.find(s => s.id === sceneId);
                if (!scene) return;

                setRewritingId(sceneId);
                setToastMessage("AIÍ∞Ä ÎåÄÎ≥∏ÏùÑ ÏàòÏ†ïÌïòÍ≥† ÏûàÏäµÎãàÎã§...");

                const modelToUse = selectedModel === 'custom' ? customModelId : selectedModel;
                const prompt = `
                Rewrite the following short video script segment to be "${type}".
                Original Script: "${scene.script}"
                
                Constraints:
                - Keep it distinct and impactful.
                - Keep it under 50 words.
                - Korean language only.
                - Return ONLY the rewritten text.
                `;

                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${modelToUse}:generateContent?key=${apiKey.trim()}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                    });

                    if (response.ok) {
                        const data = await response.json();
                        const newScript = data.candidates?.[0]?.content?.parts?.[0]?.text?.trim();
                        if (newScript) {
                            // Í≤∞Í≥º ÏóÖÎç∞Ïù¥Ìä∏
                            const newScenes = result.scenes.map(s => 
                                s.id === sceneId ? { ...s, script: newScript } : s
                            );
                            setResult({ ...result, scenes: newScenes });
                            setToastMessage("ÏàòÏ†ï ÏôÑÎ£å! ‚ú®");
                        }
                    }
                } catch (e) {
                    console.error("Rewrite failed", e);
                    setToastMessage("ÏàòÏ†ï Ïã§Ìå®. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.");
                } finally {
                    setRewritingId(null);
                    setTimeout(() => setToastMessage(null), 2000);
                }
            };

            const callGeminiAPI = async (targetUrl, topic) => {
                const modelToUse = selectedModel === 'custom' ? customModelId : selectedModel;
                const contentContext = topic 
                ? `ÏÇ¨Ïö©Ïûê ÏöîÏ≤≠ ÏÇ¨Ìï≠: "${topic}"` 
                : `(ÏÇ¨Ïö©Ïûê ÏöîÏ≤≠ ÏÇ¨Ìï≠ ÏóÜÏùå. URL Î∂ÑÏÑùÏóê ÏßëÏ§ëÌï† Í≤É)`;

                // [ÌîÑÎ°¨ÌîÑÌä∏ ÏóÖÎç∞Ïù¥Ìä∏] Ïç∏ÎÑ§Ïùº Ïπ¥ÌîºÏôÄ Ìï¥ÏãúÌÉúÍ∑∏ ÏöîÏ≤≠ Ï∂îÍ∞Ä
                const prompt = `
                Role: You are a professional Video Analyst and Content Planner.
                
                [CRITICAL MISSION]
                The user has provided a URL: "${targetUrl}"
                
                1. IF the Google Search tool is available, YOU MUST use it to search for this specific URL or video title to find its real content, transcript, and comments.
                2. IF you cannot access the URL content via tools, DO NOT HALLUCINATE. Analyze based strictly on the visible URL pattern if possible.
                3. Based on the *real* content found, create a viral strategy.

                User Context: ${contentContext}

                Return ONLY a raw JSON object (no markdown) with the following structure:
                {
                    "analysis": { 
                        "hook": "Why this specific video hooked viewers (Korean)", 
                        "retention": "Editor's technique for retention (Korean)", 
                        "viralFactor": "Core viral reason (Korean)", 
                        "improvedStrategy": "How to make it even better (Korean)" 
                    },
                    "thumbnailIdeas": ["Catchy Thumbnail Text 1", "Catchy Thumbnail Text 2"],
                    "hashtags": ["#tag1", "#tag2", "#tag3", "#tag4", "#tag5"],
                    "scenes": [
                        {
                            "id": 1,
                            "script": "Korean Narration",
                            "visualDesc": "Korean Visual Description",
                            "imagePrompt": "English Image Prompt (8K, Realistic, Korean style)",
                            "videoPrompt": "English Video Prompt"
                        }
                        // ... Generate 6 scenes
                    ],
                    "editingGuide": [
                        "Tip 1 (Korean)", "Tip 2 (Korean)", "Tip 3 (Korean)", "Tip 4 (Korean)"
                    ],
                    "blogPost": {
                        "title": "Korean Blog Title",
                        "content": "Korean Blog Content"
                    }
                }
                `;

                const requestBody = {
                    contents: [{
                        parts: [{ text: prompt }]
                    }],
                    tools: [{
                        google_search: {} 
                    }]
                };

                const delays = [1000, 3000];
                let lastError = null;

                for (let i = 0; i <= delays.length; i++) {
                    try {
                        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${modelToUse}:generateContent?key=${apiKey.trim()}`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(requestBody)
                        });

                        if (!response.ok) {
                            const errorData = await response.json().catch(() => ({}));
                            const errorMessage = errorData.error?.message || `Ïò§Î•ò ÏΩîÎìú: ${response.status}`;
                            
                            // Tool ÏßÄÏõê ÏïàÌï® Ïò§Î•ò Ï≤òÎ¶¨ (Fallback)
                            if (response.status === 400 && errorMessage.includes("tool")) {
                                console.warn("Model doesn't support tools, retrying without tools...");
                                const noToolBody = { contents: [{ parts: [{ text: prompt + "\n(Note: Search tool unavailable, please infer from URL structure or common viral patterns)" }] }] };
                                const retryResp = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${modelToUse}:generateContent?key=${apiKey.trim()}`, {
                                    method: 'POST',
                                    headers: { 'Content-Type': 'application/json' },
                                    body: JSON.stringify(noToolBody)
                                });
                                if (retryResp.ok) {
                                    const retryData = await retryResp.json();
                                    const text = retryData.candidates?.[0]?.content?.parts?.[0]?.text;
                                    if (text) return JSON.parse(text.replace(/```json/g, '').replace(/```/g, '').trim());
                                }
                            }
                            throw new Error(`AI Ìò∏Ï∂ú Ïã§Ìå® (${modelToUse}): ${errorMessage}`);
                        }

                        const data = await response.json();
                        const textResponse = data.candidates?.[0]?.content?.parts?.[0]?.text;
                        
                        if (!textResponse) throw new Error("AI ÏùëÎãµÏù¥ ÎπÑÏñ¥ÏûàÏäµÎãàÎã§.");

                        const cleanJson = textResponse.replace(/```json/g, '').replace(/```/g, '').trim();
                        return JSON.parse(cleanJson);

                    } catch (err) {
                        console.warn(`Attempt ${i + 1} failed:`, err);
                        lastError = err;
                        if (i === delays.length) break;
                        await new Promise(resolve => setTimeout(resolve, delays[i]));
                    }
                }
                throw lastError || new Error("Î∂ÑÏÑù Ïã§Ìå®. Îã§Î•∏ Î™®Îç∏ÏùÑ ÏÑ†ÌÉùÌïòÍ±∞ÎÇò ÌÇ§Î•º ÌôïÏù∏ÌïòÏÑ∏Ïöî.");
            };

            const generateContent = async () => {
                if (!description && !url) return;
                setError(null);
                setIsGenerating(true);
                setActiveStep(0);
                
                if (!apiKey) {
                    runSimulation();
                    return;
                }

                try {
                    setActiveStep(1); 
                    const aiData = await callGeminiAPI(url, description);
                    setActiveStep(2);
                    await new Promise(r => setTimeout(r, 500)); 
                    setActiveStep(3);
                    await new Promise(r => setTimeout(r, 500)); 
                    setActiveStep(4);
                    setResult(aiData);
                    setActiveStep(5);
                } catch (err) {
                    setError(err.message);
                } finally {
                    setIsGenerating(false);
                }
            };

            const runSimulation = () => {
                setTimeout(() => setActiveStep(1), 1500);
                setTimeout(() => setActiveStep(2), 3000);
                setTimeout(() => setActiveStep(3), 4500);
                setTimeout(() => setActiveStep(4), 6000);

                setTimeout(() => {
                    const topic = description || "URL Í∏∞Î∞ò Ìä∏Î†åÎìú Î∂ÑÏÑù (ÏûêÎèô Í∞êÏßÄ)";
                    const generatedData = createMockData(topic);
                    setResult(generatedData);
                    setIsGenerating(false);
                    setActiveStep(5);
                }, 7500);
            };

            const createMockData = (topic) => {
                return {
                    analysis: {
                        hook: "Ï¥àÎ∞ò 3Ï¥à ÏãúÍ∞ÅÏ†Å Ï∂©Í≤©Í≥º Î∞òÏ†Ñ ÏöîÏÜå (Îç∞Î™®)",
                        retention: "Îπ†Î•∏ Ïª∑ Ìé∏ÏßëÍ≥º ASMR ÏÇ¨Ïö¥ÎìúÎ°ú Î™∞ÏûÖÎèÑ Ïú†ÏßÄ",
                        viralFactor: "ÌòÑÏã§Ï†ÅÏù∏ Í≥µÍ∞êÎåÄ ÌòïÏÑ±Í≥º Í≥†Í∏âÏä§Îü¨Ïö¥ ÏòÅÏÉÅÎØ∏Ïùò Ï°∞Ìôî",
                        improvedStrategy: "Í∏∞Ï°¥ ÏòÅÏÉÅÎ≥¥Îã§ ÏÉâÍ∞êÏùò ÎåÄÎπÑÎ•º ÎÜíÏù¥Í≥†, ÌïúÍµ≠Ï†ÅÏù∏ Î∞∞Í≤ΩÏùÑ Îçî ÎîîÌÖåÏùºÌïòÍ≤å Î¨òÏÇ¨."
                    },
                    thumbnailIdeas: ["Ïù¥Í±∞ Î™®Î•¥Î©¥ ÏÜêÌï¥ üò±", "ÏÑúÏö∏ Ìï´Ìîå TOP 3üî•"],
                    hashtags: ["#ÏÑúÏö∏ÎßõÏßë", "#ÏÑ±ÏàòÎèô", "#Îç∞Ïù¥Ìä∏ÏΩîÏä§", "#Î¶¥Ïä§", "#Î∏åÏù¥Î°úÍ∑∏"],
                    scenes: [
                        {
                            id: 1,
                            script: "(ÎÇ¥Î†àÏù¥ÏÖò) Ïù¥Í±∞ ÏïÑÏßÅÎèÑ Î™®Î•¥Îäî ÏÇ¨Îûå ÏóÜÏ£†? ÏÑúÏö∏ÏóêÏÑú Í∞ÄÏû• Ìï´Ìïú Ïù¥Í≥≥.",
                            visualDesc: "ÏÑúÏö∏ Í∞ïÎÇ®Ïùò Î≤àÌôîÍ∞Ä, ÎπÑ Ïò® Îí§ Ï†ñÏùÄ ÏïÑÏä§ÌåîÌä∏Ïóê ÎÑ§Ïò®ÏÇ¨Ïù∏Ïù¥ Î∞òÏÇ¨ÎêòÎäî Î∞§Í±∞Î¶¨.",
                            imagePrompt: `Scene 1: Hyper-realistic 8K wide shot of a bustling Gangnam street at night...`,
                            videoPrompt: `Cinematic drone shot, low angle, moving forward quickly...`,
                        },
                        {
                            id: 2,
                            script: "(Ìö®Í≥ºÏùå: ÎöúÎ≤ÖÎöúÎ≤Ö) Î∞îÎ°ú Ïó¨Í∏∞ÏûÖÎãàÎã§.",
                            visualDesc: "Ìä∏Î†åÎîîÌïú ÏÑ±ÏàòÎèô Ïä§ÌÉÄÏùºÏùò Ïπ¥Ìéò ÏûÖÍµ¨.",
                            imagePrompt: `Scene 2: Extreme close-up of a modern cafe entrance...`,
                            videoPrompt: `Handheld camera movement, approaching a glass door...`,
                        },
                        {
                            id: 3,
                            script: "(ÎÇ¥Î†àÏù¥ÏÖò) ÏôÄ... Ïù¥ ÎπÑÏ£ºÏñº Ïã§ÌôîÏù∏Í∞ÄÏöî?",
                            visualDesc: "ÌÖåÏù¥Î∏î ÏúÑÏóê ÎÜìÏù∏ ÌôîÎ†§Ìïú ÎîîÏ†ÄÌä∏.",
                            imagePrompt: `Scene 3: Top-down food photography shot...`,
                            videoPrompt: `Slow orbit shot around a dessert...`,
                        },
                        {
                            id: 4,
                            script: "(ÎÇ¥Î†àÏù¥ÏÖò) ÏßÑÏßú ÎåÄÎ∞ïÏù∏ Í±¥ Îî∞Î°ú ÏûàÏñ¥Ïöî.",
                            visualDesc: "Ï£ºÏù∏Í≥µÏù¥ ÎÜÄÎûÄ ÌëúÏ†ïÏúºÎ°ú Î¨¥Ïñ∏Í∞ÄÎ•º Í∞ÄÎ¶¨ÌÇ¥.",
                            imagePrompt: `Scene 4: Medium shot of a handsome Korean man looking shocked...`,
                            videoPrompt: `Camera zooms in quickly (Crash Zoom)...`,
                        },
                        {
                            id: 5,
                            script: "(Îπ†Î•∏ ÌÖúÌè¨) Ïù¥Î†áÍ≤å ÌïòÎ©¥ ÏàúÏãùÍ∞ÑÏóê Ìï¥Í≤∞Îê©ÎãàÎã§.",
                            visualDesc: "Îπ†Î•¥Í≤å ÏßÄÎÇòÍ∞ÄÎäî Ìï¥Í≤∞ Í≥ºÏ†ïÏùò Î™ΩÌÉÄÏ£º.",
                            imagePrompt: `Scene 5: Action shot, motion blur...`,
                            videoPrompt: `Time-lapse style or fast-forward motion...`,
                        },
                        {
                            id: 6,
                            script: "(ÎÇ¥Î†àÏù¥ÏÖò) Îçî ÏûêÏÑ∏Ìïú Ï†ïÎ≥¥Îäî ÌîÑÎ°úÌïÑ ÎßÅÌÅ¨ ÌôïÏù∏!",
                            visualDesc: "Ï£ºÏù∏Í≥µÏù¥ Ïä§ÎßàÌä∏Ìè∞ÏùÑ Îì§Í≥† ÏõÉÏúºÎ©∞ ÌôîÎ©¥ÏùÑ Î≥¥Ïó¨Ï§å.",
                            imagePrompt: `Scene 6: Close-up of a smartphone screen...`,
                            videoPrompt: `Camera focuses on the smartphone screen then racks focus...`,
                        },
                    ],
                    editingGuide: ["Scene 1Í≥º 2 ÏÇ¨Ïù¥Îäî 'Ï§åÏù∏ Ìä∏ÎûúÏßÄÏÖò'...", "Í∏ÄÎ¶¨Ïπò Ìö®Í≥º..."],
                    blogPost: {
                        title: `[Ï∂©Í≤©] ${topic} ÏïÑÏßÅÎèÑ Î™®Î•¥ÏãúÎÇòÏöî?`,
                        content: `ÏïàÎÖïÌïòÏÑ∏Ïöî! Ïò§ÎäòÏùÄ '${topic}'Ïóê ÎåÄÌï¥ Ïù¥ÏïºÍ∏∞Ìï¥Î≥¥Î†§ Ìï©ÎãàÎã§...`
                    }
                };
            };

            const copyTextToClipboard = async (text) => {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    try { await navigator.clipboard.writeText(text); return; } 
                    catch (err) { console.warn("Clipboard API failed", err); }
                }
                try {
                    const textArea = document.createElement("textarea");
                    textArea.value = text;
                    textArea.style.position = "fixed";
                    textArea.style.left = "-9999px";
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    const successful = document.execCommand('copy');
                    document.body.removeChild(textArea);
                    if (!successful) throw new Error("Fallback failed");
                } catch (err) {
                    console.error("Copy failed", err);
                    alert("Î≥µÏÇ¨ Ïã§Ìå®. Î∏åÎùºÏö∞Ï†Ä Í∂åÌïúÏùÑ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.");
                }
            };

            const copyToClipboard = async (text, index) => {
                await copyTextToClipboard(text);
                setCopiedIndex(index);
                setTimeout(() => setCopiedIndex(null), 2000);
            };

            const handleOpenGenerator = async (prompt) => {
                await copyTextToClipboard(prompt);
                setToastMessage("ÌîÑÎ°¨ÌîÑÌä∏ Î≥µÏÇ¨ ÏôÑÎ£å! ÏÉùÏÑ± Ï∞ΩÏúºÎ°ú Ïù¥ÎèôÌï©ÎãàÎã§.");
                setTimeout(() => setToastMessage(null), 4000);
                const baseUrl = "https://nano-banana-pro.ai/generate"; 
                const targetUrl = `${baseUrl}?prompt=${encodeURIComponent(prompt)}`;
                window.open(targetUrl, '_blank');
            };

            return (
                <div className="relative min-h-screen">
                    {toastMessage && (
                        <div className="fixed top-20 left-1/2 transform -translate-x-1/2 z-50 animate-in">
                        <div className="bg-gray-900/90 text-white px-6 py-3 rounded-full shadow-2xl flex items-center space-x-3 backdrop-blur-sm border border-gray-700">
                            {testStatus === 'error' ? <AlertCircle className="w-5 h-5 text-red-400" /> : <Check className="w-5 h-5 text-green-400" />}
                            <span className="font-medium text-sm">{toastMessage}</span>
                        </div>
                        </div>
                    )}

                    <header className="border-b border-gray-200 bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
                        <div className="max-w-6xl mx-auto px-4 h-16 flex items-center justify-between">
                        <div className="flex items-center space-x-3">
                            <div className="w-9 h-9 bg-gradient-to-br from-yellow-300 via-amber-400 to-yellow-600 rounded-lg flex items-center justify-center shadow-lg border border-yellow-200">
                            <Gem className="w-5 h-5 text-white drop-shadow-sm" />
                            </div>
                            <span className="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-amber-600 to-yellow-500">
                            Ï£ºÏÑ±ÏÇ¨Îßà ÏáºÏ∏† Î∂ÑÏÑùÌï¥ÏÑú Ïπ¥Ìîº ÏûêÎèôÌôî
                            </span>
                        </div>
                        <div className="flex items-center space-x-4">
                            {!apiKey && (
                            <span className="hidden md:inline-flex text-xs bg-yellow-100 text-yellow-700 px-3 py-1.5 rounded-full border border-yellow-200 items-center font-medium">
                                <AlertCircle className="w-3.5 h-3.5 mr-1.5" />
                                Demo Mode
                            </span>
                            )}
                            <button 
                            onClick={() => setShowSettings(!showSettings)}
                            className="p-2 hover:bg-gray-100 rounded-full transition text-gray-500 hover:text-gray-900"
                            title="Settings & API Key"
                            >
                            <Settings className="w-5 h-5" />
                            </button>
                        </div>
                        </div>
                    </header>

                    {showSettings && (
                        <div className="border-b border-gray-200 bg-white p-6 animate-in shadow-inner">
                        <div className="max-w-6xl mx-auto flex flex-col md:flex-row items-start gap-4">
                            <div className="flex-1 w-full space-y-4">
                                <div>
                                    <label className="block text-xs font-bold text-gray-500 uppercase mb-2">Google Gemini API Key</label>
                                    <input 
                                        type="password" 
                                        value={apiKey}
                                        onChange={(e) => setApiKey(e.target.value)}
                                        placeholder="Enter your AI Studio API Key (Start with AIza...)"
                                        className="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-yellow-500 focus:border-transparent outline-none transition text-gray-900 placeholder-gray-400"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-xs font-bold text-gray-500 uppercase mb-2">ÏÇ¨Ïö©Ìï† AI Î™®Îç∏ ÏÑ†ÌÉù</label>
                                    <select 
                                        value={selectedModel}
                                        onChange={(e) => setSelectedModel(e.target.value)}
                                        className="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-yellow-500 outline-none text-gray-900 cursor-pointer"
                                    >
                                        {availableModels.map(model => (
                                            <option key={model.id} value={model.id}>{model.name}</option>
                                        ))}
                                    </select>
                                    {selectedModel === 'custom' && (
                                        <div className="mt-2">
                                            <input 
                                                type="text" 
                                                value={customModelId}
                                                onChange={(e) => setCustomModelId(e.target.value)}
                                                placeholder="Ïòà: gemini-3.0-pro-001"
                                                className="w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-sm focus:ring-2 focus:ring-yellow-500 outline-none"
                                            />
                                        </div>
                                    )}
                                </div>
                            </div>
                            
                            <div className="flex flex-row md:flex-col gap-2 mt-4 md:mt-0">
                                <button 
                                    onClick={handleTestApiKey}
                                    disabled={testStatus === 'testing'}
                                    className={`flex items-center justify-center space-x-2 px-4 py-2.5 rounded-lg text-sm font-bold transition border h-10 md:w-32 ${
                                        testStatus === 'success' ? 'bg-green-100 text-green-700 border-green-200' :
                                        testStatus === 'error' ? 'bg-red-100 text-red-700 border-red-200' :
                                        'bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200'
                                    }`}
                                >
                                    {testStatus === 'testing' ? <div className="animate-spin rounded-full h-4 w-4 border-b-2 border-current"></div> : <Network className="w-4 h-4" />}
                                    <span>Ïó∞Í≤∞ ÌÖåÏä§Ìä∏</span>
                                </button>
                                <button 
                                    onClick={handleSaveApiKey}
                                    className="flex items-center justify-center space-x-2 bg-yellow-500 hover:bg-yellow-600 text-white px-5 py-2.5 rounded-lg text-sm font-bold transition shadow-md hover:shadow-lg h-10 md:w-32"
                                >
                                    <Save className="w-4 h-4" />
                                    <span>Ï†ÄÏû•ÌïòÍ∏∞</span>
                                </button>
                            </div>
                        </div>
                        </div>
                    )}

                    <main className="max-w-6xl mx-auto px-4 py-8">
                        {error && (
                        <div className="mb-6 bg-red-50 border border-red-200 text-red-600 p-4 rounded-xl flex items-center space-x-3 shadow-sm">
                            <AlertCircle className="w-5 h-5 flex-shrink-0" />
                            <span>{error}</span>
                        </div>
                        )}

                        {/* Input Area */}
                        <div className="bg-white rounded-2xl p-6 mb-8 border border-gray-200 shadow-lg">
                        <div className="flex flex-col md:flex-row gap-6">
                            <div className="flex-1 space-y-6">
                            <div>
                                <label className="block text-sm font-bold text-gray-700 mb-2 flex items-center justify-between">
                                <span className="flex items-center"><LinkIcon className="h-4 w-4 mr-1.5 text-pink-500" />Î∂ÑÏÑùÌï† Î†àÌçºÎü∞Ïä§ URL (ÌïÑÏàò)</span>
                                {url && !description && <span className="text-xs text-pink-600 font-medium bg-pink-50 px-2 py-0.5 rounded-full animate-pulse">AIÍ∞Ä ÎßÅÌÅ¨Î•º Í≤ÄÏÉâÌïòÏó¨ Î∂ÑÏÑùÌï©ÎãàÎã§</span>}
                                </label>
                                <div className="relative">
                                <input type="text" value={url} onChange={(e) => setUrl(e.target.value)} placeholder="https://www.instagram.com/reels/... ÎòêÎäî YouTube Shorts ÎßÅÌÅ¨" className="w-full bg-gray-50 border border-gray-200 rounded-xl py-3 px-4 focus:ring-2 focus:ring-yellow-500 focus:bg-white outline-none transition text-gray-900 placeholder-gray-400" />
                                </div>
                            </div>
                            <div>
                                <label className="block text-sm font-bold text-gray-700 mb-2 flex items-center justify-between">
                                <span className="flex items-center"><FileText className="h-4 w-4 mr-1.5 text-blue-500" />Ï∂îÍ∞Ä ÏÑ§Î™Ö (ÏÑ†ÌÉùÏÇ¨Ìï≠)</span>
                                </label>
                                <textarea value={description} onChange={(e) => setDescription(e.target.value)} placeholder="Ïòà: ÎπàÌã∞ÏßÄ Í∞êÏÑ±ÏúºÎ°ú Î∂ÑÏÑùÌï¥Ï§ò, 20ÎåÄ ÌÉÄÍ≤üÏúºÎ°ú Î≥ÄÍ≤ΩÌï¥Ï§ò Îì±" className="w-full bg-gray-50 border border-gray-200 rounded-xl py-3 px-4 h-32 focus:ring-2 focus:ring-yellow-500 focus:bg-white outline-none transition resize-none text-gray-900 placeholder-gray-400 leading-relaxed" />
                            </div>
                            </div>
                            <div className="flex flex-col justify-end md:w-56">
                            <button onClick={generateContent} disabled={isGenerating || (!description && !url)} className={`h-16 rounded-2xl font-bold text-lg flex items-center justify-center space-x-2 transition-all transform hover:-translate-y-1 shadow-md ${isGenerating || (!description && !url) ? 'bg-gray-200 text-gray-400 cursor-not-allowed shadow-none' : 'bg-gradient-to-r from-amber-500 to-yellow-500 text-white hover:from-amber-400 hover:to-yellow-400 shadow-yellow-200'}`}>
                                {isGenerating ? <><div className="animate-spin rounded-full h-5 w-5 border-b-2 border-white"></div><span>{apiKey ? 'AI Í∏∞Ìöç Ï§ë...' : 'Î∂ÑÏÑù ÏãúÎÆ¨Î†àÏù¥ÏÖò...'}</span></> : <><Sparkles className="w-5 h-5 fill-current" /><span>ÏΩòÌÖêÏ∏† ÏûêÎèô ÏÉùÏÑ±</span></>}
                            </button>
                            </div>
                        </div>
                        </div>

                        {/* Results */}
                        {result && !isGenerating && (
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8 animate-in">
                            <div className="lg:col-span-1 space-y-6">
                                {/* Thumbnail & Hashtags (New Feature) */}
                                <div className="bg-white rounded-2xl p-6 border border-gray-200 shadow-lg border-t-4 border-t-pink-500">
                                    <h3 className="flex items-center space-x-2 text-lg font-bold text-gray-800 mb-4 pb-3 border-b border-gray-100">
                                        <div className="p-1.5 bg-pink-100 rounded-lg text-pink-600"><ImageIcon className="w-5 h-5" /></div>
                                        <span>AI Ï∂îÏ≤ú Ïç∏ÎÑ§Ïùº & ÌÉúÍ∑∏</span>
                                    </h3>
                                    <div className="space-y-4">
                                        <div>
                                            <span className="text-xs font-bold text-gray-500 uppercase mb-2 block">Ïç∏ÎÑ§Ïùº Î¨∏Íµ¨ (ÌÖçÏä§Ìä∏)</span>
                                            <div className="flex flex-wrap gap-2">
                                                {result.thumbnailIdeas && result.thumbnailIdeas.map((idea, idx) => (
                                                    <span key={idx} className="bg-pink-50 text-pink-700 px-3 py-1.5 rounded-lg text-sm font-bold border border-pink-100">{idea}</span>
                                                ))}
                                            </div>
                                        </div>
                                        <div>
                                            <span className="text-xs font-bold text-gray-500 uppercase mb-2 block">Ï∂îÏ≤ú Ìï¥ÏãúÌÉúÍ∑∏</span>
                                            <div className="flex flex-wrap gap-2">
                                                {result.hashtags && result.hashtags.map((tag, idx) => (
                                                    <span key={idx} className="text-blue-600 text-xs bg-blue-50 px-2 py-1 rounded">
                                                        <Hash className="w-3 h-3 inline mr-0.5" />{tag.replace('#','')}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white rounded-2xl p-6 border border-gray-200 shadow-lg">
                                    <h3 className="flex items-center space-x-2 text-lg font-bold text-gray-800 mb-4 pb-3 border-b border-gray-100">
                                        <div className="p-1.5 bg-green-100 rounded-lg text-green-600"><BarChart2 className="w-5 h-5" /></div>
                                        <span>AI Î∂ÑÏÑù Î¶¨Ìè¨Ìä∏</span>
                                    </h3>
                                    <div className="space-y-4">
                                        <div className="bg-gray-50 p-4 rounded-xl border border-gray-100">
                                            <span className="text-xs text-gray-500 uppercase font-bold block mb-1.5">Viral Hook</span>
                                            <p className="text-sm text-gray-800 font-medium leading-relaxed">{result.analysis.hook}</p>
                                        </div>
                                        <div className="bg-gray-50 p-4 rounded-xl border border-gray-100">
                                            <span className="text-xs text-gray-500 uppercase font-bold block mb-1.5">Retention Strategy</span>
                                            <p className="text-sm text-gray-800 font-medium leading-relaxed">{result.analysis.retention}</p>
                                        </div>
                                        <div className="bg-yellow-50 p-4 rounded-xl border border-yellow-100">
                                            <span className="text-xs text-yellow-600 uppercase font-bold block mb-1.5">Upgrade Plan</span>
                                            <p className="text-sm text-yellow-900 font-medium leading-relaxed">{result.analysis.improvedStrategy}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div className="lg:col-span-2 space-y-6">
                                <div className="bg-white rounded-2xl border border-gray-200 shadow-lg overflow-hidden">
                                    <div className="bg-white p-5 border-b border-gray-200 flex justify-between items-center">
                                        <h3 className="flex items-center space-x-2 text-lg font-bold text-gray-800">
                                            <div className="p-1.5 bg-purple-100 rounded-lg text-purple-600"><Layout className="w-5 h-5" /></div>
                                            <span>6-Scene Pipeline</span>
                                        </h3>
                                        <span className="text-xs bg-purple-50 text-purple-700 px-3 py-1.5 rounded-full font-semibold border border-purple-100">Nano Banana Pro Optimized</span>
                                    </div>
                                    <div className="divide-y divide-gray-100">
                                    {result.scenes.map((scene) => (
                                        <div key={scene.id} className="p-6 hover:bg-gray-50 transition-colors">
                                            <div className="flex justify-between items-start mb-5">
                                                <span className="inline-flex items-center justify-center px-3 py-1 rounded-full bg-gray-900 text-xs font-bold text-white shadow-sm">SCENE {scene.id}</span>
                                                
                                                {/* ‚ú® Magic Script Buttons */}
                                                <div className="flex space-x-2">
                                                    <span className="text-xs text-gray-400 flex items-center mr-2"><Wand className="w-3 h-3 mr-1" />AI ÏàòÏ†ï:</span>
                                                    <button onClick={() => handleRewriteScript(scene.id, 'make it shorter and punchy')} disabled={rewritingId === scene.id} className="text-xs bg-white border border-gray-200 hover:border-purple-400 hover:text-purple-600 px-2 py-1 rounded transition">Îçî ÏßßÍ≤å</button>
                                                    <button onClick={() => handleRewriteScript(scene.id, 'make it more provocative and emotional')} disabled={rewritingId === scene.id} className="text-xs bg-white border border-gray-200 hover:border-red-400 hover:text-red-600 px-2 py-1 rounded transition">Îçî ÏûêÍ∑πÏ†ÅÏúºÎ°ú</button>
                                                    <button onClick={() => handleRewriteScript(scene.id, 'phrase it as a question')} disabled={rewritingId === scene.id} className="text-xs bg-white border border-gray-200 hover:border-blue-400 hover:text-blue-600 px-2 py-1 rounded transition">ÏßàÎ¨∏ÌòïÏúºÎ°ú</button>
                                                </div>
                                            </div>
                                            
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                                <div className="space-y-5">
                                                    <div className={`transition-all duration-300 ${rewritingId === scene.id ? 'opacity-50 animate-pulse' : ''}`}>
                                                        <span className="text-xs text-gray-400 font-bold uppercase tracking-wide">Script (Audio)</span>
                                                        <p className="text-gray-900 font-semibold bg-white p-4 rounded-xl border border-gray-200 shadow-sm mt-2 leading-relaxed text-lg relative">
                                                            {scene.script}
                                                            {rewritingId === scene.id && <span className="absolute top-2 right-2 text-xs text-purple-600 font-bold animate-pulse">ÏàòÏ†ï Ï§ë...</span>}
                                                        </p>
                                                    </div>
                                                    <div>
                                                        <span className="text-xs text-gray-400 font-bold uppercase tracking-wide">Visual Content</span>
                                                        <p className="text-sm text-gray-600 mt-2 leading-relaxed">{scene.visualDesc}</p>
                                                    </div>
                                                </div>
                                                <div className="space-y-4">
                                                    <div className="relative group">
                                                        <div className="flex justify-between items-center mb-2">
                                                            <span className="text-xs text-pink-600 font-bold uppercase flex items-center bg-pink-50 px-2 py-0.5 rounded"><ImageIcon className="w-3 h-3 mr-1.5" /> Image Prompt</span>
                                                            <div className="flex space-x-1">
                                                                <button onClick={() => copyToClipboard(scene.imagePrompt, `img-${scene.id}`)} className="text-gray-400 hover:text-pink-500 transition p-1">{copiedIndex === `img-${scene.id}` ? <Check className="w-4 h-4 text-green-500" /> : <Copy className="w-4 h-4" />}</button>
                                                                <button onClick={() => handleOpenGenerator(scene.imagePrompt)} className="flex items-center space-x-1 text-xs bg-pink-100 hover:bg-pink-200 text-pink-700 px-2 py-1 rounded-md transition font-bold"><span>ÏÉùÏÑ±</span><ExternalLink className="w-3 h-3" /></button>
                                                            </div>
                                                        </div>
                                                        <div className="bg-gray-900 p-4 rounded-xl text-xs text-gray-300 font-mono leading-relaxed h-28 overflow-y-auto custom-scrollbar shadow-inner">{scene.imagePrompt}</div>
                                                    </div>
                                                    <div className="relative group">
                                                        <div className="flex justify-between items-center mb-2">
                                                            <span className="text-xs text-blue-600 font-bold uppercase flex items-center bg-blue-50 px-2 py-0.5 rounded"><Video className="w-3 h-3 mr-1.5" /> Video Gen Prompt</span>
                                                            <button onClick={() => copyToClipboard(scene.videoPrompt, `vid-${scene.id}`)} className="text-gray-400 hover:text-blue-500 transition">{copiedIndex === `vid-${scene.id}` ? <Check className="w-4 h-4 text-green-500" /> : <Copy className="w-4 h-4" />}</button>
                                                        </div>
                                                        <div className="bg-gray-900 p-4 rounded-xl text-xs text-gray-300 font-mono leading-relaxed h-28 overflow-y-auto custom-scrollbar shadow-inner">{scene.videoPrompt}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                    </div>
                                </div>
                                <div className="bg-white rounded-2xl p-6 border border-gray-200 shadow-lg">
                                    <div className="flex justify-between items-center mb-5 pb-3 border-b border-gray-100">
                                        <h3 className="flex items-center space-x-2 text-lg font-bold text-gray-800"><div className="p-1.5 bg-orange-100 rounded-lg text-orange-600"><FileText className="w-5 h-5" /></div><span>ÏûêÎèô ÏÉùÏÑ± Î∏îÎ°úÍ∑∏ Ï¥àÏïà</span></h3>
                                        <button onClick={() => copyToClipboard(`${result.blogPost.title}\n\n${result.blogPost.content}`, 'blog')} className="flex items-center space-x-1.5 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition font-medium">{copiedIndex === 'blog' ? <Check className="w-3.5 h-3.5 text-green-600" /> : <Copy className="w-3.5 h-3.5" />}<span>Ï†ÑÏ≤¥ Î≥µÏÇ¨</span></button>
                                    </div>
                                    <div className="bg-gray-50 p-6 rounded-xl text-gray-800 border border-gray-100">
                                        <h1 className="text-xl font-bold mb-4 text-gray-900">{result.blogPost.title}</h1>
                                        <p className="whitespace-pre-line text-sm leading-relaxed text-gray-700">{result.blogPost.content}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ViralContentBuilder />);
    </script>
</body>
</html>